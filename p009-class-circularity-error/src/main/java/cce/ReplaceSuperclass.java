/*
 * Copyright 2022 Objectos Software LTDA.
 *
 * Reprodução parcial ou total proibida.
 */
package cce;

import java.lang.invoke.MethodHandles;

public class ReplaceSuperclass {
  /*

  original payload:

  cafebabe0000003e001e0700020100106363652f436c734369726345727230320700040100106363
  652f436c734369726345727230310100063c696e69743e010003282956010004436f64650a000300
  090c0005000609000b000d07000c0100106a6176612f6c616e672f53797374656d0c000e000f0100
  036f75740100154c6a6176612f696f2f5072696e7453747265616d3b08001101000e48656c6c6f20
  66726f6d202330320a001300150700140100136a6176612f696f2f5072696e7453747265616d0c00
  1600170100077072696e746c6e010015284c6a6176612f6c616e672f537472696e673b295601000f
  4c696e654e756d6265725461626c650100124c6f63616c5661726961626c655461626c6501000474
  6869730100124c6363652f436c734369726345727230323b01000a536f7572636546696c65010011
  436c734369726345727230322e6a6176610021000100030000000000010001000500060001000700
  00003f000200010000000d2ab70008b2000a1210b60012b10000000200180000000e000300000009
  0004000a000c000b00190000000c00010000000d001a001b00000001001c00000002001d

  LangObjtOnly:

  cafebabe
  0000003e0010
  070002
  0100106363652f4c616e674f626a744f6e6c79
  070004
  0100106a6176612f6c616e672f4f626a656374
  0100063c696e69743e010003282956010004436f64650a000300
  090c0005000601000f4c696e654e756d6265725461626c650100124c6f63616c5661726961626c65
  5461626c65010004746869730100124c6363652f4c616e674f626a744f6e6c793b01000a536f7572
  636546696c650100114c616e674f626a744f6e6c792e6a6176610021000100030000000000010001
  00050006000100070000002f00010001000000052ab70008b100000002000a000000060001000000
  0b000b0000000c000100000005000c000d00000001000e00000002000f

   */

  private static final String MOD_CLASS_02 = String.join(
    "",

    "cafebabe",
    "0000003e001e",
    "070002",
    "0100106363652f436c73436972634572723032", // this class
    "070004",
    "0100106a6176612f6c616e672f4f626a656374", // superclass = java/lang/Object
    "0100063c696e69743e010003282956010004436f64650a000300",
    "090c0005000609000b000d07000c0100106a6176612f6c616e672f53797374656d0c000e000f0100",
    "036f75740100154c6a6176612f696f2f5072696e7453747265616d3b08001101000e48656c6c6f20",
    "66726f6d202330320a001300150700140100136a6176612f696f2f5072696e7453747265616d0c00",
    "1600170100077072696e746c6e010015284c6a6176612f6c616e672f537472696e673b295601000f",
    "4c696e654e756d6265725461626c650100124c6f63616c5661726961626c655461626c6501000474",
    "6869730100124c6363652f436c734369726345727230323b01000a536f7572636546696c65010011",
    "436c734369726345727230322e6a6176610021000100030000000000010001000500060001000700",
    "00003f000200010000000d2ab70008b2000a1210b60012b10000000200180000000e000300000009",
    "0004000a000c000b00190000000c00010000000d001a001b00000001001c00000002001d"
  );

  public static void main(String[] args) throws Exception {
    var lookup = MethodHandles.lookup();

    System.out.println("Will create ClsCirErr02");

    DynClass.defineAndCreate(lookup, MOD_CLASS_02);
  }
}