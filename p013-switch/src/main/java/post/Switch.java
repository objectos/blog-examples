/*
 * Copyright (C) 2022 Objectos Software LTDA.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package post;

import java.util.concurrent.TimeUnit;
import org.openjdk.jmh.annotations.Benchmark;
import org.openjdk.jmh.annotations.BenchmarkMode;
import org.openjdk.jmh.annotations.Fork;
import org.openjdk.jmh.annotations.Measurement;
import org.openjdk.jmh.annotations.Mode;
import org.openjdk.jmh.annotations.OutputTimeUnit;
import org.openjdk.jmh.annotations.Param;
import org.openjdk.jmh.annotations.Scope;
import org.openjdk.jmh.annotations.State;
import org.openjdk.jmh.annotations.Warmup;

@State(Scope.Thread)
@BenchmarkMode(Mode.AverageTime)
@OutputTimeUnit(TimeUnit.NANOSECONDS)
@Warmup(time = 1, timeUnit = TimeUnit.SECONDS)
@Measurement(time = 1, timeUnit = TimeUnit.SECONDS)
@Fork(value = 2)
public class Switch {

  @Param({"4", "64", "256", "1024"})
  int state;

  @Benchmark
  public int lookupSwitch008() {
    return switch (state) {
      case 1 -> 1001;
      case 2 -> 1002;
      case 3 -> 1003;
      case 4 -> 1004;
      case 5 -> 1005;
      case 6 -> 1006;
      case 7 -> 1007;
      case 255 -> 1255;
      default -> Integer.MAX_VALUE;
    };
  }

  @Benchmark
  public int lookupSwitch256() {
    return switch (state) {
      case 1 -> 1001;
      case 4 -> 1002;
      case 9 -> 1003;
      case 16 -> 1004;
      case 25 -> 1005;
      case 36 -> 1006;
      case 49 -> 1007;
      case 64 -> 1008;
      case 81 -> 1009;
      case 100 -> 1010;
      case 121 -> 1011;
      case 144 -> 1012;
      case 169 -> 1013;
      case 196 -> 1014;
      case 225 -> 1015;
      case 256 -> 1016;
      case 289 -> 1017;
      case 324 -> 1018;
      case 361 -> 1019;
      case 400 -> 1020;
      case 441 -> 1021;
      case 484 -> 1022;
      case 529 -> 1023;
      case 576 -> 1024;
      case 625 -> 1025;
      case 676 -> 1026;
      case 729 -> 1027;
      case 784 -> 1028;
      case 841 -> 1029;
      case 900 -> 1030;
      case 961 -> 1031;
      case 1024 -> 1032;
      case 1089 -> 1033;
      case 1156 -> 1034;
      case 1225 -> 1035;
      case 1296 -> 1036;
      case 1369 -> 1037;
      case 1444 -> 1038;
      case 1521 -> 1039;
      case 1600 -> 1040;
      case 1681 -> 1041;
      case 1764 -> 1042;
      case 1849 -> 1043;
      case 1936 -> 1044;
      case 2025 -> 1045;
      case 2116 -> 1046;
      case 2209 -> 1047;
      case 2304 -> 1048;
      case 2401 -> 1049;
      case 2500 -> 1050;
      case 2601 -> 1051;
      case 2704 -> 1052;
      case 2809 -> 1053;
      case 2916 -> 1054;
      case 3025 -> 1055;
      case 3136 -> 1056;
      case 3249 -> 1057;
      case 3364 -> 1058;
      case 3481 -> 1059;
      case 3600 -> 1060;
      case 3721 -> 1061;
      case 3844 -> 1062;
      case 3969 -> 1063;
      case 4096 -> 1064;
      case 4225 -> 1065;
      case 4356 -> 1066;
      case 4489 -> 1067;
      case 4624 -> 1068;
      case 4761 -> 1069;
      case 4900 -> 1070;
      case 5041 -> 1071;
      case 5184 -> 1072;
      case 5329 -> 1073;
      case 5476 -> 1074;
      case 5625 -> 1075;
      case 5776 -> 1076;
      case 5929 -> 1077;
      case 6084 -> 1078;
      case 6241 -> 1079;
      case 6400 -> 1080;
      case 6561 -> 1081;
      case 6724 -> 1082;
      case 6889 -> 1083;
      case 7056 -> 1084;
      case 7225 -> 1085;
      case 7396 -> 1086;
      case 7569 -> 1087;
      case 7744 -> 1088;
      case 7921 -> 1089;
      case 8100 -> 1090;
      case 8281 -> 1091;
      case 8464 -> 1092;
      case 8649 -> 1093;
      case 8836 -> 1094;
      case 9025 -> 1095;
      case 9216 -> 1096;
      case 9409 -> 1097;
      case 9604 -> 1098;
      case 9801 -> 1099;
      case 10000 -> 1100;
      case 10201 -> 1101;
      case 10404 -> 1102;
      case 10609 -> 1103;
      case 10816 -> 1104;
      case 11025 -> 1105;
      case 11236 -> 1106;
      case 11449 -> 1107;
      case 11664 -> 1108;
      case 11881 -> 1109;
      case 12100 -> 1110;
      case 12321 -> 1111;
      case 12544 -> 1112;
      case 12769 -> 1113;
      case 12996 -> 1114;
      case 13225 -> 1115;
      case 13456 -> 1116;
      case 13689 -> 1117;
      case 13924 -> 1118;
      case 14161 -> 1119;
      case 14400 -> 1120;
      case 14641 -> 1121;
      case 14884 -> 1122;
      case 15129 -> 1123;
      case 15376 -> 1124;
      case 15625 -> 1125;
      case 15876 -> 1126;
      case 16129 -> 1127;
      case 16384 -> 1128;
      case 16641 -> 1129;
      case 16900 -> 1130;
      case 17161 -> 1131;
      case 17424 -> 1132;
      case 17689 -> 1133;
      case 17956 -> 1134;
      case 18225 -> 1135;
      case 18496 -> 1136;
      case 18769 -> 1137;
      case 19044 -> 1138;
      case 19321 -> 1139;
      case 19600 -> 1140;
      case 19881 -> 1141;
      case 20164 -> 1142;
      case 20449 -> 1143;
      case 20736 -> 1144;
      case 21025 -> 1145;
      case 21316 -> 1146;
      case 21609 -> 1147;
      case 21904 -> 1148;
      case 22201 -> 1149;
      case 22500 -> 1150;
      case 22801 -> 1151;
      case 23104 -> 1152;
      case 23409 -> 1153;
      case 23716 -> 1154;
      case 24025 -> 1155;
      case 24336 -> 1156;
      case 24649 -> 1157;
      case 24964 -> 1158;
      case 25281 -> 1159;
      case 25600 -> 1160;
      case 25921 -> 1161;
      case 26244 -> 1162;
      case 26569 -> 1163;
      case 26896 -> 1164;
      case 27225 -> 1165;
      case 27556 -> 1166;
      case 27889 -> 1167;
      case 28224 -> 1168;
      case 28561 -> 1169;
      case 28900 -> 1170;
      case 29241 -> 1171;
      case 29584 -> 1172;
      case 29929 -> 1173;
      case 30276 -> 1174;
      case 30625 -> 1175;
      case 30976 -> 1176;
      case 31329 -> 1177;
      case 31684 -> 1178;
      case 32041 -> 1179;
      case 32400 -> 1180;
      case 32761 -> 1181;
      case 33124 -> 1182;
      case 33489 -> 1183;
      case 33856 -> 1184;
      case 34225 -> 1185;
      case 34596 -> 1186;
      case 34969 -> 1187;
      case 35344 -> 1188;
      case 35721 -> 1189;
      case 36100 -> 1190;
      case 36481 -> 1191;
      case 36864 -> 1192;
      case 37249 -> 1193;
      case 37636 -> 1194;
      case 38025 -> 1195;
      case 38416 -> 1196;
      case 38809 -> 1197;
      case 39204 -> 1198;
      case 39601 -> 1199;
      case 40000 -> 1200;
      case 40401 -> 1201;
      case 40804 -> 1202;
      case 41209 -> 1203;
      case 41616 -> 1204;
      case 42025 -> 1205;
      case 42436 -> 1206;
      case 42849 -> 1207;
      case 43264 -> 1208;
      case 43681 -> 1209;
      case 44100 -> 1210;
      case 44521 -> 1211;
      case 44944 -> 1212;
      case 45369 -> 1213;
      case 45796 -> 1214;
      case 46225 -> 1215;
      case 46656 -> 1216;
      case 47089 -> 1217;
      case 47524 -> 1218;
      case 47961 -> 1219;
      case 48400 -> 1220;
      case 48841 -> 1221;
      case 49284 -> 1222;
      case 49729 -> 1223;
      case 50176 -> 1224;
      case 50625 -> 1225;
      case 51076 -> 1226;
      case 51529 -> 1227;
      case 51984 -> 1228;
      case 52441 -> 1229;
      case 52900 -> 1230;
      case 53361 -> 1231;
      case 53824 -> 1232;
      case 54289 -> 1233;
      case 54756 -> 1234;
      case 55225 -> 1235;
      case 55696 -> 1236;
      case 56169 -> 1237;
      case 56644 -> 1238;
      case 57121 -> 1239;
      case 57600 -> 1240;
      case 58081 -> 1241;
      case 58564 -> 1242;
      case 59049 -> 1243;
      case 59536 -> 1244;
      case 60025 -> 1245;
      case 60516 -> 1246;
      case 61009 -> 1247;
      case 61504 -> 1248;
      case 62001 -> 1249;
      case 62500 -> 1250;
      case 63001 -> 1251;
      case 63504 -> 1252;
      case 64009 -> 1253;
      case 64516 -> 1254;
      case 65025 -> 1255;
      case 65536 -> 1256;
      default -> Integer.MAX_VALUE;
    };
  }

  @Benchmark
  public int tableSwitch008() {
    return switch (state) {
      case 1 -> 1001;
      case 2 -> 1002;
      case 3 -> 1003;
      case 4 -> 1004;
      case 5 -> 1005;
      case 6 -> 1006;
      case 7 -> 1007;
      case 8 -> 1008;
      default -> Integer.MAX_VALUE;
    };
  }

  @Benchmark
  public int tableSwitch256() {
    return switch (state) {
      case 1 -> 1001;
      case 2 -> 1002;
      case 3 -> 1003;
      case 4 -> 1004;
      case 5 -> 1005;
      case 6 -> 1006;
      case 7 -> 1007;
      case 8 -> 1008;
      case 9 -> 1009;
      case 10 -> 1010;
      case 11 -> 1011;
      case 12 -> 1012;
      case 13 -> 1013;
      case 14 -> 1014;
      case 15 -> 1015;
      case 16 -> 1016;
      case 17 -> 1017;
      case 18 -> 1018;
      case 19 -> 1019;
      case 20 -> 1020;
      case 21 -> 1021;
      case 22 -> 1022;
      case 23 -> 1023;
      case 24 -> 1024;
      case 25 -> 1025;
      case 26 -> 1026;
      case 27 -> 1027;
      case 28 -> 1028;
      case 29 -> 1029;
      case 30 -> 1030;
      case 31 -> 1031;
      case 32 -> 1032;
      case 33 -> 1033;
      case 34 -> 1034;
      case 35 -> 1035;
      case 36 -> 1036;
      case 37 -> 1037;
      case 38 -> 1038;
      case 39 -> 1039;
      case 40 -> 1040;
      case 41 -> 1041;
      case 42 -> 1042;
      case 43 -> 1043;
      case 44 -> 1044;
      case 45 -> 1045;
      case 46 -> 1046;
      case 47 -> 1047;
      case 48 -> 1048;
      case 49 -> 1049;
      case 50 -> 1050;
      case 51 -> 1051;
      case 52 -> 1052;
      case 53 -> 1053;
      case 54 -> 1054;
      case 55 -> 1055;
      case 56 -> 1056;
      case 57 -> 1057;
      case 58 -> 1058;
      case 59 -> 1059;
      case 60 -> 1060;
      case 61 -> 1061;
      case 62 -> 1062;
      case 63 -> 1063;
      case 64 -> 1064;
      case 65 -> 1065;
      case 66 -> 1066;
      case 67 -> 1067;
      case 68 -> 1068;
      case 69 -> 1069;
      case 70 -> 1070;
      case 71 -> 1071;
      case 72 -> 1072;
      case 73 -> 1073;
      case 74 -> 1074;
      case 75 -> 1075;
      case 76 -> 1076;
      case 77 -> 1077;
      case 78 -> 1078;
      case 79 -> 1079;
      case 80 -> 1080;
      case 81 -> 1081;
      case 82 -> 1082;
      case 83 -> 1083;
      case 84 -> 1084;
      case 85 -> 1085;
      case 86 -> 1086;
      case 87 -> 1087;
      case 88 -> 1088;
      case 89 -> 1089;
      case 90 -> 1090;
      case 91 -> 1091;
      case 92 -> 1092;
      case 93 -> 1093;
      case 94 -> 1094;
      case 95 -> 1095;
      case 96 -> 1096;
      case 97 -> 1097;
      case 98 -> 1098;
      case 99 -> 1099;
      case 100 -> 1100;
      case 101 -> 1101;
      case 102 -> 1102;
      case 103 -> 1103;
      case 104 -> 1104;
      case 105 -> 1105;
      case 106 -> 1106;
      case 107 -> 1107;
      case 108 -> 1108;
      case 109 -> 1109;
      case 110 -> 1110;
      case 111 -> 1111;
      case 112 -> 1112;
      case 113 -> 1113;
      case 114 -> 1114;
      case 115 -> 1115;
      case 116 -> 1116;
      case 117 -> 1117;
      case 118 -> 1118;
      case 119 -> 1119;
      case 120 -> 1120;
      case 121 -> 1121;
      case 122 -> 1122;
      case 123 -> 1123;
      case 124 -> 1124;
      case 125 -> 1125;
      case 126 -> 1126;
      case 127 -> 1127;
      case 128 -> 1128;
      case 129 -> 1129;
      case 130 -> 1130;
      case 131 -> 1131;
      case 132 -> 1132;
      case 133 -> 1133;
      case 134 -> 1134;
      case 135 -> 1135;
      case 136 -> 1136;
      case 137 -> 1137;
      case 138 -> 1138;
      case 139 -> 1139;
      case 140 -> 1140;
      case 141 -> 1141;
      case 142 -> 1142;
      case 143 -> 1143;
      case 144 -> 1144;
      case 145 -> 1145;
      case 146 -> 1146;
      case 147 -> 1147;
      case 148 -> 1148;
      case 149 -> 1149;
      case 150 -> 1150;
      case 151 -> 1151;
      case 152 -> 1152;
      case 153 -> 1153;
      case 154 -> 1154;
      case 155 -> 1155;
      case 156 -> 1156;
      case 157 -> 1157;
      case 158 -> 1158;
      case 159 -> 1159;
      case 160 -> 1160;
      case 161 -> 1161;
      case 162 -> 1162;
      case 163 -> 1163;
      case 164 -> 1164;
      case 165 -> 1165;
      case 166 -> 1166;
      case 167 -> 1167;
      case 168 -> 1168;
      case 169 -> 1169;
      case 170 -> 1170;
      case 171 -> 1171;
      case 172 -> 1172;
      case 173 -> 1173;
      case 174 -> 1174;
      case 175 -> 1175;
      case 176 -> 1176;
      case 177 -> 1177;
      case 178 -> 1178;
      case 179 -> 1179;
      case 180 -> 1180;
      case 181 -> 1181;
      case 182 -> 1182;
      case 183 -> 1183;
      case 184 -> 1184;
      case 185 -> 1185;
      case 186 -> 1186;
      case 187 -> 1187;
      case 188 -> 1188;
      case 189 -> 1189;
      case 190 -> 1190;
      case 191 -> 1191;
      case 192 -> 1192;
      case 193 -> 1193;
      case 194 -> 1194;
      case 195 -> 1195;
      case 196 -> 1196;
      case 197 -> 1197;
      case 198 -> 1198;
      case 199 -> 1199;
      case 200 -> 1200;
      case 201 -> 1201;
      case 202 -> 1202;
      case 203 -> 1203;
      case 204 -> 1204;
      case 205 -> 1205;
      case 206 -> 1206;
      case 207 -> 1207;
      case 208 -> 1208;
      case 209 -> 1209;
      case 210 -> 1210;
      case 211 -> 1211;
      case 212 -> 1212;
      case 213 -> 1213;
      case 214 -> 1214;
      case 215 -> 1215;
      case 216 -> 1216;
      case 217 -> 1217;
      case 218 -> 1218;
      case 219 -> 1219;
      case 220 -> 1220;
      case 221 -> 1221;
      case 222 -> 1222;
      case 223 -> 1223;
      case 224 -> 1224;
      case 225 -> 1225;
      case 226 -> 1226;
      case 227 -> 1227;
      case 228 -> 1228;
      case 229 -> 1229;
      case 230 -> 1230;
      case 231 -> 1231;
      case 232 -> 1232;
      case 233 -> 1233;
      case 234 -> 1234;
      case 235 -> 1235;
      case 236 -> 1236;
      case 237 -> 1237;
      case 238 -> 1238;
      case 239 -> 1239;
      case 240 -> 1240;
      case 241 -> 1241;
      case 242 -> 1242;
      case 243 -> 1243;
      case 244 -> 1244;
      case 245 -> 1245;
      case 246 -> 1246;
      case 247 -> 1247;
      case 248 -> 1248;
      case 249 -> 1249;
      case 250 -> 1250;
      case 251 -> 1251;
      case 252 -> 1252;
      case 253 -> 1253;
      case 254 -> 1254;
      case 255 -> 1255;
      case 256 -> 1256;
      default -> Integer.MAX_VALUE;
    };
  }

}